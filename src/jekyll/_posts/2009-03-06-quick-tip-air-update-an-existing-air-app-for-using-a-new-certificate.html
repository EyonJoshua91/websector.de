--- 
layout: post
title: "Quick tip (AIR): Updating an existing AIR app for using a new certificate"
tags: 
- AIR
status: publish
type: post
published: true
meta: 
  _edit_last: "2"
---
First of all thanks Adobe for sponsoring a <a href="http://www.thawte.com">Thawte</a> certificate after adding <a href="http://code.google.com/p/flash-thunderbolt/wiki/ThunderBoltAS3Console">ThunderBolt AS3 Console</a> to the <a href="http://www.adobe.com/cfusion/marketplace/index.cfm?event=marketplace.offering&offeringid=10762">new Adobe Marketplace</a>!

If you will ever certificate an existing AIR app with a new certificate, such as a <a href="http://www.thawte.com">Thawte</a> certificate, you have to migrate it. 

<!--more-->

What does "migrate" mean? It's like an injection for an AIR app with all needed information about old and new certificate. You have to do it to avoid any troubles updating an existing AIR app by users. Just follow the next steps:

<ol>
	<li>Build your AIR app as always using Flex Builder and signing it up with the new certificate ( Project -> Export Release Build )</li>
<li>Open Terminal and go to project folder typing <code>cd {pathToYourProject}</code></li>
        <li>Migrate your new AIR app with the old certificate using <code>-migrate</code> command. <strong>Note:</strong> To run this command make sure that you have added the bin folder of Flex SDK as a PATH environment variable before.

Run:

<code>adt -migrate -storetype {fileTypeOfOldCertificate} -keystore {pathToOldCertificate} {appJustCreated}.air {newMigratedApp}.air</code>

<li>Type password of the old certificate and that's it!</li>

<li>For updating ThunderBoltAS3 Console I did it as follow:</li>

<code>adt -migrate -storetype pkcs12 -keystore air_websector_certificate.p12 ThunderBoltAS3Console.air ThunderBoltAS3Console_v2.2.air</code>

Some notes:
- <em>pkcs12</em> - store type of the old certificate (such as JKS, PKCS12, PKCS11, KeychainStore, Windows-MY or Windows-ROOT)
- <em>air_websector_certificate.p12</em> - path to the old certificate
- <em>ThunderBoltAS3Console.air</em> - app which has been built before with a new certificate
- <em>ThunderBoltAS3Console_v2.2.air</em> - app which has to migrate

<li>For more information check "<a href="http://help.adobe.com/en_US/AIR/1.5/devappsflex/WS5b3ccc516d4fbf351e63e3d118666ade46-7ff0.html#WSFAB6E5EB-316A-42b0-81A3-0BC232ACD99A">Changing certificates</a>" and "<a href="http://help.adobe.com/en_US/AIR/1.5/devappsflex/WS13ACB483-1711-43c0-9049-0A7251630A7D.html">Signing an AIR file to change the application certificate</a>" at <a href="http://help.adobe.com/en_US/AIR/1.5/">LiveDocs for Adobe AIR</a>.</li>
</ol>

-Jens

