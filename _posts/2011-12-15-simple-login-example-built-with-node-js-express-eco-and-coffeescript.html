--- 
layout: post
title: Simple Login Example built with Node.js (Express), Eco and CoffeeScript
tags: 
- CoffeeScript
- HTML5
- JavaScript
- Node
status: publish
type: post
published: true
meta: 
  _edit_last: "2"
---
After <a href="https://plus.google.com/111160856985577256573/posts/St3JmmXfcaT">deciding to port an ActionScript Cafe Townsend example into JavaScript</a> the first step was to build <a href="http://nodejs-coffeescript-login.herokuapp.com/">a simple login example</a>. 

It is built with <a href="http://nodejs.org/">Node.js</a> (<a href="http://expressjs.com/">Express</a>) on server-side and it uses <a href="https://github.com/sstephenson/eco">Eco</a> templates to render views on client-side. <a href="https://github.com/sectore/nodejs-coffeescript-login">Most of code</a> is written in <a href="http://http//jashkenas.github.com/coffee-script/">CoffeeScript</a>.

<!--more-->

<h2>Screen shot</2>

<a href="http://nodejs-coffeescript-login.herokuapp.com/" class="img"><img src="https://github.com/sectore/nodejs-coffeescript-login/raw/master/wiki/screenshot-nodejs-coffeescript-login.png" alt="Screen shot of simple login example" /></a>

<h2>Random notes</h2>
Here are some notes or tips based on issues I ran into writing this app:

<h3>CoffeeScript + Express</h3>
<ul>
<li>Use <a href="https://github.com/twilson63/cupcake">cupcake</a> to build a skeleton of your CoffeeScript / Express app as easy as possible</li>
</ul>

<h3>Eco templates</h3>
<ul>
<li>Don't forget to declare any value sent from server using a "<code>@</code>" within the Eco template, e.g <code><%- @user.name %></code> It took me some time to find and fix such a typo.</li>
</ul>


<h3>Deploying to Heroku</h3>
<ul>
<li>To run an app written in CoffeeScript on Heroku you have to point the <code>app.coffee</code> and not <code>app.js</code> as a command to the <a href="http://devcenter.heroku.com/articles/procfile">Procfile</a> as follow: <code>web: coffee app.coffee</code></li>
<li>Run <code>heroku ps</code> to check if the app has been crashed or not.</li>
<li>In case of crashing check <code>heroku logs</code> for very helpful detailes</li>
<li>Heroku may not run the version of Node.js you have installed on your local machine. At the moment of writing this post Heroku is running v.0.4.7., not the latest version of Node.js v.0.6.5. If you have to downgrade your local version you will find <a href="http://www.websector.de/blog/2011/12/15/quick-tip-node-how-to-downgrade-node-js-on-os-x/">here a short instruction</a>.</li>
<li>To rename your subdomain using by Heroku you have to rename the app itself as follow: <code>heroku rename newname --app oldname</code>. After that you may have to repoint your git repository as well: <code>git remote rm heroku</code> and <code>git remote add heroku git@heroku.com:newname.git</code></li>
<li>Instead of using an hardcoded value for a port check the PORT environment variable in your app.coffee as well <code>port = process.env.PORT or 9294</code> Because Heroku tells the app which port is listen to. </li>
<li>Last but not least: Heroku has published an excellent article: "<a href="http://devcenter.heroku.com/articles/node-js">Getting Started with Node.js on Heroku/Cedar</a>"</li>
</ul>


<h2>Source code</h2>
You will find all <a href="https://github.com/sectore/nodejs-coffeescript-login">source code</a> and its build instruction at <a href="https://github.com/sectore/nodejs-coffeescript-login">GitHub</a>

Have fun!

-Jens
