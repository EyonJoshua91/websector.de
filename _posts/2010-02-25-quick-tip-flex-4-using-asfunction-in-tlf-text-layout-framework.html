--- 
layout: post
title: "Quick Tip (Flex 4): Using asfunction in TLF (Text Layout Framework)"
tags: 
- Flex
status: publish
type: post
published: true
meta: 
  _edit_last: "2"
---
Do you remember the very old school global function called  <code>asfunction</code>? It was used to call custom ActionScript methods clicking an HTML link. The definition in HTML was something like this: <code>< a href='asfunction:myFunction' >my link< /a > </code>.

<!--more-->

Since ActionScript 3 <code>asfunction</code> has <a href="http://www.adobe.com/devnet/actionscript/as3_migration_table.html">been deprecated</a> and was replaced with a new event handling using <code><a href="http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/events/TextEvent.html#LINK">TextEvent.LINK</a></code> and <code>'event:myEventType'</code> defined at the HTML link. For example <code>&lt; a href='event:myEventType' &gt;my link&lt; /a &gt; </code>. In this case you have to add just one event listener to handle all(!!) events.
<h2>Flex 4 + Text Layout Framework + asfunction?</h2>
But what happens if you want to call an ActionScript method clicking an HTML link and using the Text Layout Framework (TLF) in Flex 4? 

<code>RichEditableText</code> is the TLF component to embed a clickable HTML text, but it does not support an event handler for a <code>TextEvent.LINK</code> event. Today I ran into this issue and I couldn't find any solution (either at official Flex doc or not at Google).

Anyway, the solution it is pretty easy. Just define your HTML links as before in Flex 3 and add an event listener for every (!!) event to a <code>TextFlow</code> of a <code>RichEditableText</code>

<phpcode><?php 
		$sourceUrl = 'http://www.websector.de/blog/wp-content/uploads/2010/02/25/ASFunctionExample.mxml';
		$headline = 'ASFunctionExample.mxml';
		$hasDownloadLink = true;

		$codeExample = new CodeViewer();
		$codeExample->showCode($sourceUrl, $headline, $hasDownloadLink);
		?></phpcode>
		
		
<h2>Some notes:</h2>
<ul>
	<li>To have an clickable HTML link using <code>RichEditableText</code>, its property <code>selectable</code> and <code>editable</code> has to be 'false'</li>
	<li>Anchors defined in HTML will be a <code>LinkElements</code> at the TLF</li>
	<li>All events will be dispatched from this <code>LinkElement</code> as a <code>FlowElementMouseEvent</code>. Its type is a 'custom' type and will be the same as defined in HTML.</li>
	<li>Any 'asfunction' call has to be defined in HTML using 'event:myEventType'. The LinkElement will check itself if the link includes an url or just an 'asfunction' call.</li>
	<li>To listen all events you have to add different listeners for each event type to a <code>TextFlow</code> of a <code>RichEditableText</code>.</li>
</ul>
-Jens
