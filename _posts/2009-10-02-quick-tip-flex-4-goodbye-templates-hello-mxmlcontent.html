--- 
layout: post
title: "Quick tip (Flex 4): Goodbye templates - hello mxmlContent"
tags: 
- Flex
status: publish
type: post
published: true
meta: 
  _edit_last: "2"
---
<h2>Back in Flex 3</h2>

In Flex 3 is it pretty painful to extend a custom container component for adding children to it using MXML. The following example will throw an error like this: <em>Error: Multiple sets of visual children have been specified for this component (base component definition and derived component definition).</em>

<!--more-->

<phpcode><?php 
		$sourceUrl = 'http://www.websector.de/blog/wp-content/uploads/2009/10/02/MySubContainerFlex3.mxml';
		$headline = 'MySubContainer.mxml';
		$hasDownloadLink = true;

		$codeExample = new CodeViewer();
		$codeExample->showCode($sourceUrl, $headline, $hasDownloadLink);
		?></phpcode>


To avoid this issue in Flex 3 there are already some workarounds using <a href="http://livedocs.adobe.com/flex/3/html/help.html?content=templating_3.html">template components</a>. For more information check the following posts: <ul>
	<li>Peter Ent: <a href="http://weblogs.macromedia.com/pent/archives/2006/03/component_templ.cfm">Template in Flex</a></li>
	<li>Tony Fendall: <a href="http://www.munkiihouse.com/?p=37">Adding 'Multiple sets of visual children' to custom components</a></li>
	<li>Dirk Eismann: <a href="http://www.richinternet.de/blog/index.cfm?entry=CD61A506-00CA-B6DF-802A549E330AFD67">A simple(r) workaround for the 'Multiple sets of visual children' runtime error</a></li>
</ul>

<h2>Today in Flex 4</h2>

Now in Flex 4 this issue has been fixed. There is no need for using custom template component if you extend Sparks <code><a href="http://livedocs.adobe.com/flex/gumbo/langref/spark/components/Group.html">Group</a></code> or <code><a href="http://livedocs.adobe.com/flex/gumbo/langref/spark/components/SkinnableContainer.html">SkinnableContainer</a></code> in multiple levels. That means there is no error using:
<phpcode><?php 
		$sourceUrl = 'http://www.websector.de/blog/wp-content/uploads/2009/10/02/MySubContainerFlex4.mxml';
		$headline = 'MySubContainer.mxml';
		$hasDownloadLink = true;

		$codeExample = new CodeViewer();
		$codeExample->showCode($sourceUrl, $headline, $hasDownloadLink);
		?></phpcode>


<strong>Behind the scenes:</strong> Every Spark <code>Group</code> or <code>SkinnableContainer</code> has a property called <code>mxmlContent</code>, which handles internal all the needed stuff for organizing children defined by MXML. Furthermore all container classes has defined a metatag declaration named <code>DefaultProperty</code> 
<ul>
	<li>Group: <code>[DefaultProperty("mxmlContent")] )</code></li>
	<li>SkinnableContainer: <code>[DefaultProperty("mxmlContentFactory")]</code></li>
</ul>
which causes the compiler to add all (top) children defined within MXML as an array to the setter method <code>mxmlConent</code> or  <code>mxmlContentFactory</code>.


<strong>Important note: </strong>If you have already defined children within the super class, these will be removed by the subclass by default. To avoid this, you have to override the setter method <code>mxmlContent</code> of the subclass or build your own <a href="http://help.adobe.com/en_US/Flex/4.0/UsingSDK/WS2db454920e96a9e51e63e3d11c0bf69084-7a1e.html">custom template component</a>.

Happy Flex 4 coding ;)

-Jens
